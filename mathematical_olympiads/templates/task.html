{% extends "base.html" %}
{% block title %}{{ question }}{% endblock %}
{% block content %}
{% include 'nav.html' %}

<div class="container">
    <div class="row">
        {% include "sidebar_question.html" %}
        <div class="col-md-9">
            <div class="card mb-3 shadow-sm">
                {% if task.image_url %}
                <img class="card-img-top" src="{{ task.image_url }}"
                    style="object-fit: cover;">
                {% endif %}
                <div class="card-body">
                    <h4 class="card-title">{{ task.title }}</h4>
                    <p class="card-text">{{ task.text }}</p>

                    {% if is_done %}

                    {% if not question.is_input_question %}
                    <div class="btn-group-vertical">
                        {% for ans in ans_list %}
                        <button type="button" class="btn {% if ans.correct %}btn-success{% else %}btn-danger{% endif %}"
                            style="text-align: left" disabled>{{ ans.text }}</button>
                        {% endfor %}
                    </div>
                    {% else %}
                    <form>

                        <div class="form-group">
                            <label for="text_ans">–í–∞—à –æ—Ç–≤–µ—Ç:</label>
                            <textarea class="form-control" id="text_ans" rows="3" name="user_input_text" disabled
                                placeholder="{{ user_answer }}"></textarea>
                        </div>

                    </form>
                    {% endif %}

                    {% else %}

                    {% if not question.is_input_question %}
                    <div class="btn-group-vertical">
                        {% for ans in ans_list %}
                        <a class="btn btn-light" href="{% url 'question_pass' quiz.pk question.pk ans.pk %}"
                            role="button" style="text-align: left">{{ ans.text }}</a>
                        {% endfor %}
                    </div>
                    {% else %}
                    <!--                        –≤—Å—Ç–∞–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é —Ñ–æ—Ä–º—É —Å –ø—Ä–∏–µ–º–æ–º –æ—Ç–≤–µ—Ç–æ–≤-->



                    <form action="{% url 'question' quiz.pk question.pk %}" method="post">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="text">–í–∞—à –æ—Ç–≤–µ—Ç:</label>
                            <textarea class="form-control" id="text" rows="3" name="user_input_text"></textarea>
                        </div>
                        <button type="submit" class="btn btn-outline-danger">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </form>



                    {% endif %}

                    {% endif %}
                    {% if is_done %}

                    {% if not question.is_input_question %}
                    <br><br>
                    {% endif %}
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle"></i> {{ question.additional_information }}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% if is_done %}
            {% if question_advice|length != 0 %}

            <div class="card shadow-sm" style="margin-bottom: 8px">
                <div class="card-body">
                    <h4 class="card-title">–ü—Ä–æ–π–¥–∏—Ç–µ –µ—â—ë: {{ question_advice.0.title }}</h4><a class="card-link"
                        href="{% url 'question' quiz.pk question_advice.0.pk %}">–ü—Ä–æ–π—Ç–∏</a>
                </div>
            </div>
            <br>
            {% else %}

            <div class="card shadow-sm" style="margin-bottom: 8px">
                <div class="card-body">
                    <h4 class="card-title">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! ü•≥üéà‚Äãüéâ</h4>
                    <p class="card-text">–í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –∫–≤–µ—Å—Ç <a href="{% url 'quiz' quiz.pk %}">¬´‚Äé{{ quiz }}¬ª</a>
                        {% if quiz_advice|length != 0 %}
                        <br>–î–ª—è –≤–∞—Å —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–æ–≤—ã–π –∫–≤–µ—Å—Ç <a
                            href="{% url 'quiz' quiz_advice.0.pk %}">¬´{{ quiz_advice.0.title }}¬ª</a>
                        {% endif %}
                    </p>

                </div>
            </div>
            <br>
            {% endif %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}